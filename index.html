<!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.17.1/matter.min.js"></script>
    <script>
        function Start() {
            /*** CLASS DEFINITIONS ***/
            class Hull {
                constructor() {
                    this.position = 0;
                    this.rotation = 0;
                    this.body = Bodies.rectangle(350, 0, 270, 111, {
                        render: {
                            sprite: {
                                texture: "./client/images_and_data/mSixTankBody.png",
                            }
                        },
                        isStatic: false
                    });
                }
            }

            class Turret {
                constructor() {
                    this.position = 0;
                    this.rotation = 0;
                    this.body = Bodies.rectangle(350, 0, 10, 10, {
                        render: {
                            sprite: {
                                texture: "./client/images_and_data/mSixTankTurret.png",
                            }
                        },
                        isStatic: false
                    });
                }
            }

            class MSixTank {
                constructor(options) {
                    this.position = 0;
                    this.rotation = 0;
                    this.body = Body.create(options);
                }
            }

            // Globals
            window.globals = {};
            window.globals.canvas = document.getElementById("canvas");
            window.globals.context = window.globals.canvas.getContext("2d");

            // Physics APIs (aliases)
            var Engine = Matter.Engine;         // For updating physics.
            var Render = Matter.Render;         // For rendering results of Engine.
            var Bodies = Matter.Bodies;         // To use a pre-made Body.
            var Composite = Matter.Composite;   // Container for entity made of multiple parts.
            var Body = Matter.Body;             // To make a custom Body.
            var Runner = Matter.Runner;         // Optional game loop (Auto updates Engine).
            var World = Matter.World;

            // Set canvas size
            window.globals.canvas.width = window.innerWidth;
            window.globals.canvas.height = window.innerHeight;

            // Create a physics engine
            var engine = Engine.create();

            // Create a renderer
            var render = Render.create({
                canvas: window.globals.canvas,
                engine: engine,
                options: {
                    wireframes: false
                }
            });
            // Start the renderer
            Render.run(render);

            // Create entities
            var mSixTank = new MSixTank({
                parts: [new Hull().body, new Turret().body]
            });
            var test = Bodies.rectangle(200, 300, 200, 200);
            var ground = Bodies.rectangle(400, 610, 810, 60, { isStatic: true });

            Composite.add(engine.world, [ground, mSixTank.body, test]);

            /*** Game Loop ***/
            (function gameLoop(timeStamp) {
                // Run Game Loop every frame
                window.requestAnimationFrame(gameLoop);

                // Update physics
                Engine.update(engine, 1000 / 60);
            })();
        }
    </script>
</head>

<body onload="Start()">
    <div id="canvas-div">
        <canvas id="canvas" width="1000" height="1000" style="position: absolute; z-index: 0;"></canvas>
    </div>
</body>

</html>